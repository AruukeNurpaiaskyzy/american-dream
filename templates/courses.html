{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="{% static 'style/header.css' %}">
  <link rel="stylesheet" href="{% static 'style/style.css' %}">
  <link rel="stylesheet" href="{% static 'style/burger.css' %}">
  <link rel="stylesheet" href="{% static 'style/footer.css' %}">
  <link rel="stylesheet" href="{% static 'style/card.css' %}">
  <link rel="stylesheet" href="{% static 'style/courses.css' %}">
  <link rel="stylesheet" href="{% static 'style/modal.css' %}">
  <link rel="stylesheet" href="{% static 'style/modalSign.css' %}">
</head>

<body>
  <div class="hero courses container">

    <header>
      <a href="{% url 'settings' %}">
        <img src="{% static 'img/logo.svg' %}" alt="">

      </a>
      <nav>
        <ul>
          <li><a href="{% url 'courses' %}">–ö—É—Ä—Å—ã</a></li>
          <li><a href="{% url 'about' %}">–û –Ω–∞—Å</a></li>
          <li><a href="{% url 'settings' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>
      </nav>
      <button class="btn header_btn"><a href="#questions">
          –ó–∞–ø–∏—Å–∞—Ç—Å—è
        </a></button>
      <div class="burger-menu">
        <input id="menu__toggle" type="checkbox" />
        <label class="menu__btn" for="menu__toggle">
          <span></span>
        </label>

        <div class="menu__box">
          <div class="burger-menu__nav">
            <a class="burger-menu__nav_nav" href="./courses.html">–ö—É—Ä—Å—ã</a>
            <a class="burger-menu__nav_nav" href="./about.html">–û –Ω–∞—Å</a>
            <a class="burger-menu__nav_nav" href="./index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a class="burger-menu__nav_nav btn" href="#">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</a>
          </div>
        </div>
      </div>
    </header>
    <h1 class="title">{{ courses.title }} üéì</h1>
    <p class="description">{{ courses.description|safe }}
    </p>
  </div>

  <div class="anim_box container ">
    <div class="anim_box_it">
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
      <h1 class="anim_box_it_text">–ö–£–†–°–´ IT</h1>
    </div>

    <div class="anim_box_ort">
      <h1 class="anim_box_ort_text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–†–¢</h1>
      <h1 class="anim_box_ort_text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–†–¢</h1>
      <h1 class="anim_box_ort_text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–†–¢</h1>
    </div>

    <div class="anim_box_lang">
      <h1 class="anim_box_lang_text">–ö—É—Ä—Å—ã –∞—Ä–∞–±—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏</h1>
      <h1 class="anim_box_lang_text">–ö—É—Ä—Å—ã –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</h1>
    </div>
  </div>

  <section id="data">
    <div class="container">
      <div class="data">
  
        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="data_btns">
          {% for direction in directions %}
            <button data-category="{{ direction.id }}" class="{% if forloop.first %}active{% endif %}">
              {{ direction.title }}
            </button>
          {% endfor %}
        </div>
  
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="data_info">
          {% for direction in directions %}
            <div id="{{ direction.id }}" class="data_info_content {% if not forloop.first %}hidden{% endif %}">
              {% for course in courses_all %}
                {% if course.direction.id == direction.id %}
                  <div class="card {{ course.color_theme }}">
                    <div class="card_img">
                      <div>
                        <p>{{ course.title }}</p>
                        <h5>{{ course.direction.title }}</h5>
                      </div>
                      <img src="{{ course.photo.url }}" style="width: 135px; height: 135px;" alt="">
                    </div>
                    <ul class="card_list">
                      {% for program in course.programs.all %}
                        <li>{{ program.title }}</li>
                      {% empty %}
                        <li>–ù–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º</li>
                      {% endfor %}
                    </ul>
                    <div class="card_discount">
                      <div class="card_discount_head">
                        <div>
                          <p class="card_discount_title line-through">{{ course.price }} —Å–æ–º</p>
                          <p class="card_discount_title">{{ course.discounted_price }} —Å–æ–º</p>
                        </div>
                        <div class="card_price_minus">-{{ course.discount_percent }}%</div>
                      </div>
                      <div class="card_price">
                        <h1 class="card_price_n">{{ course.monthly_price }}</h1>
                        <p class="card_price_som">—Å–æ–º/–º–µ—Å</p>
                      </div>
                    </div>
                    <div class="card_btn">
                      <a href="#modal-{{ course.id }}" class="detailed">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                      <button class="signup">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endfor %}
        </div>
  
      </div>
    </div>
  </section>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const buttons = document.querySelectorAll('.data_btns button');
      const contents = document.querySelectorAll('.data_info_content');
  
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const category = button.dataset.category;
  
          // –°–±—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
          buttons.forEach(btn => btn.classList.remove('active'));
  
          // –°–∫—Ä—ã—Ç—å –≤—Å–µ –±–ª–æ–∫–∏
          contents.forEach(content => content.style.display = 'none');
  
          // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π
          document.getElementById(category).style.display = 'block';
  
          // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
          button.classList.add('active');
        });
      });
  
      // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–π –±–ª–æ–∫
      contents.forEach((content, index) => {
        content.style.display = index === 0 ? 'block' : 'none';
      });
    });
  </script>
  <style>
    .modal_overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }

  .modal_box {
    background: white;
    border-radius: 12px;
    padding: 30px;
    max-width: 900px;
    width: 100%;
    animation: fadeIn 0.3s ease;
    position: relative;
  }

  .modal_close {
    position: absolute;
    top: 15px;
    right: 20px;
    background: none;
    border: none;
    font-size: 24px;
    color: #555;
    cursor: pointer;
  }

  .modal_hero {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }

  .modal_text {
    flex: 1;
  }

  .modal_img {
    width: 150px;
    height: auto;
    object-fit: contain;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
  }

  </style>
  {% for course in courses_all %}
  <div class="modal" id="modal-{{ course.id }}" style="display: none;">
    <div class="modal_overlay">
      <div class="modal_box">
        <button class="modal_close" data-close="{{ course.id }}">√ó</button>

        <div class="modal_hero">
          <div class="modal_text">
            <div>{{ course.title_model|safe }}</div>
            <div>{{ course.description_model|safe }}</div>
          </div>
          <img src="{{ course.photo.url }}" alt="{{ course.title }}" class="modal_img">
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
      document.querySelectorAll('.detailed').forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const modalId = this.getAttribute('href').replace('#', '');
          const modal = document.getElementById(modalId);
          if (modal) {
            modal.style.display = 'block';
            document.body.style = ''; // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
          }
        });
      });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–Ω–æ–ø–∫–µ X
      document.querySelectorAll('.modal_close').forEach(button => {
        button.addEventListener('click', function () {
          const id = this.dataset.close;
          const modal = document.getElementById(`modal-${id}`);
          if (modal) {
            modal.style.display = 'none';
          }
        });
      });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—é (–∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É)
      document.querySelectorAll('.modal_overlay').forEach(overlay => {
        overlay.addEventListener('click', function (e) {
          if (e.target === this) {
            const modal = this.closest('.modal');
            modal.style.display = 'none';
            document.body.style.overflow = '';
          }
        });
      });

      // (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∞–≤–∏—à–µ Esc
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
          document.querySelectorAll('.modal').forEach(modal => {
            modal.style.display = 'none';
          });
          document.body.style.overflow = '';
        }
      });

    });
    document.querySelectorAll('.signup').forEach(button => {
      button.addEventListener('click', function () {
        const courseId = this.dataset.courseId;
        document.getElementById('courseIdInput').value = courseId;
        document.getElementById('modalSign').style.display = 'block';
        document.body.style.overflow = 'hidden';
      });
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ
    document.querySelector('.modalSign_close').addEventListener('click', () => {
      document.getElementById('modalSign').style.display = 'none';
      document.body.style.overflow = '';
    });
    
  </script>
  <div id="modalSign">
    <div class="modalSign">
      <div class="container">
        <button class="modalSign_close">X</button>

        <div class="card">
          <div class="card_img">
            <div>
              <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</p>
              <h5>Beginner (A1-A2)</h5>
            </div>
            <img class="" src="./img/e404.png" alt="">
          </div>
          <div class="card_discount">
            <div class="card_discount_head">
              <div>
                <p class="card_discount_title line-through">6000 —Å–æ–º</p>
                <p class="card_discount_title">5600 —Å–æ–º</p>
              </div>
              <div class="card_price_minus">-5%</div>
            </div>
            <div class="card_price">
              <h1 class="card_price_n">3,000</h1>
              <p class="card_price_som">—Å–æ–º/–º–µ—Å</p>
            </div>
          </div>
        </div>
        <form id="modalSignForm" method="POST">
          {% csrf_token %}
          <input type="hidden" name="course_id" id="courseIdInput">
        
          <input type="text" name="name_register" placeholder="–ò–º—è" required>
          <div>
            <input type="text" name="phone_register" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
            <input type="email" name="email_register" placeholder="–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞">
          </div>
          <button type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
        
      </div>
    </div>
  </div>
  
  <footer class="footer">
    <div class="footer-section-1">
      <img src="{% static 'img/logo.svg' %}" alt="logo" class="logo-footer" />
      <div class="uls">
        <div class="site-sections ul-con">
          <h2>–†–∞–∑–¥–µ–ª—ã —Å–∞–π—Ç–æ–≤</h2>
          <ul>
            <li><a href="{% url 'courses' %}">–ö—É—Ä—Å—ã</a></li>
            <li><a href="{% url 'about' %}">–û –Ω–∞—Å</a></li>
            <li><a href="{% url 'settings' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
          </ul>
        </div>
        <div class="social-madia ul-con">
          <h2>–°–æ—Ü. —Å–µ—Ç–∏</h2>
          <ul>
            <li> <a href="{{settings.linksinsta}}" target="_blank">Instagram</a></li>
            <li> <a href="{{settings.linksyoutube}}" target="_blank">Youtube</a></li>
            <li> <a href="{{settings.linkstiktok}}" target="_blank">Tik-tok</a></li>
          </ul>
        </div>
        <div class="contacts ul-con">
          <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
          <ul>
            <li>+996 564 464 676</li>
            <li>–ü–Ω-–ü—Ç —Å 9:00 –¥–æ 20:00</li>
            <li>–°–±-–í—Å —Å 10:00 –¥–æ 18:00</li>
          </ul>
        </div>
      </div>
    </div>
    <hr />
    <div class="footer-section-2">
      <p class="copyright">¬© 2025 "American dream". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      <p class="policy">–ü–æ–ª–∏—Ç–∏–∫–∞</p>
    </div>
  </footer>

  <script src="{% static 'js/burger.js' %}"></script>
  <script src="{% static 'js/courses.js' %}"></script>
</body>

</html>